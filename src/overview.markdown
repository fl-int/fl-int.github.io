---
layout: page
title: SQL Overview
permalink: /overview/
---

# Общая информация по SQL
## Уровень изолированности транзакций
Этот параметр определяет **допустимый уровень согласованности данных при выполнении параллельных транзакций**.

Низкий уровень позволяет выполнять большее количество транзакций за счет повышения быстродействия. Платой за это становится возможная несогласованность данных. На практике используется для того, чтобы обеспечить максимальную скорость работы при заданных требованиях согласованности данных.

### Примеры проблем

**Потерянное обновление (lost update)** – две транзакции, T1 и T2, *обновляют* некое значение в таблице:
1. Обе одновременно прочитали текущее значение из таблицы
1. Обе обновили значение
1. T1 записала свой результат в таблицу
1. Т2 записывает свой результат в таблицу
1. Результат выполнения T1 оказался *потерян*, т.к. перезаписан другим результатом.

**"Грязное" чтение** – чтение данных, измененных транзакцией, которая откатится:
1. T1 изменила значение поля
1. T2 прочитала измененное значение поля
1. T1 откатилась
1. *Значение поля прочинанное T2 оказалось ошибочно*

**Неповторяющееся чтение** – повторное чтение данных в рамках одной транзакции дает другой результат:
1. T1 прочитала данные: `select balance from users where id=1`
1. T2 изменила данные: `update users set balance=balance+100 where id=1`
1. T1 заново читает данные: `select balance from users where id=1`
1. T1 получает иной результат

**Фантомное чтение** – повторное чтение данных дает иной результат. Отличие от "неповторяющегося чтения" в том, что результат T1 изменяется из-за добавления новых данных, а не изменения существующих.
1. T1 прочитала данные: `select sum(balance) from users`
1. T2 изменила данные: `insert into users (id, balance) values (1, 1000)`
1. T1 заново читает данные: `select sum(balance) from users`
1. T1 получает иной результат

### Уровни изоляции

### Источники
- [https://ru.wikipedia.org/wiki/Уровень_изолированности_транзакций](https://ru.wikipedia.org/wiki/Уровень_изолированности_транзакций)
